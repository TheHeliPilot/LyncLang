extern <math.h> {
    def sqrt(x: int): double; // wait, we dont have double yet. sqrt takes double in C.
    // in Lync we only have int. passing int to double arg works in C (implicit cast).
    // result is double. we cant store double.
    // lync int is C int.
    // `int sqrt(int)`?? in C its `double sqrt(double)`.
    // if we declare `def sqrt(x: int): int;` -> generated C: `sqrt(x)` returns double, cast to int implicit?
    // yes.
    
    def abs(x: int): int; // stdlib.h actually. math.h has fabs. abs is in stdlib.h.
}

extern <stdlib.h> {
    def abs(x: int): int;
    def rand(): int;
    def srand(seed: int): void;
}

def main(): int {
    print("Testing Extern C...");
    
    // test abs
    val: int = abs(-42);
    print("abs(-42) =", val);
    
    // test rand
    srand(12345);
    r: int = rand();
    print("rand() =", r);
    
    return 0;
}
